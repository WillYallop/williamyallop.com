<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta content="IE=edge" http-equiv="X-UA-Compatible"><meta content="width=device-width,initial-scale=1" name="viewport"><link href="../../css/main.css" rel="stylesheet"><title>@functionalities/formhandler | William Yallop</title><meta content="Form handler is a wrapper for sending and handling form errors and successes. It uses the browser's built-in input validation to check the form submitting." name="description"><meta content="@functionalities/formhandler | William Yallop" name="twitter:title"><meta content="Form handler is a wrapper for sending and handling form errors and successes. It uses the browser's built-in input validation to check the form submitting." name="twitter:description"><meta content="@functionalities/formhandler | William Yallop" property="og:title"><meta content="Form handler is a wrapper for sending and handling form errors and successes. It uses the browser's built-in input validation to check the form submitting." property="og:description"><script type="application/ld+json">{
        "@context": "http://schema.org",
        "@type": "Project",
        "name": "@functionalities/formhandler",
        "description": "Form handler is a wrapper for sending and handling form errors and successes. It uses the browser's built-in input validation to check the form submitting.",
        "url": "https://www.npmjs.com/package/@functionalities/formhandler",
        "image": "functionalities/formhandler_thumbnail.jpg",
        "author": {
            "@type": "Person",
            "name": "William Yallop"
        },
        "dateCreated": "2022-08-20T00:00:00.000Z", 
        "dateModified": "2022-09-24T00:00:00.000Z",
        "datePublished": "2022-09-24T00:00:00.000Z",
        "keywords": "Typescript"
    }</script><meta content="Portfolio, Projects" name="keywords"><meta content="index, follow" name="robots"><meta content="William Yallop" name="author"><meta content="summary_large_image" name="twitter:card"><meta content="https://williamyallop.com/static-images/card.jpg" name="twitter:image"><meta content="https://williamyallop.com/static-images/card.jpg" property="og:image"><meta content="https://williamyallop.com" property="og:url"><meta content="William Yallop" property="og:site_name"><meta content="website" property="og:type"><script>window.addEventListener("DOMContentLoaded", function () { document.body.classList.remove('preload'); });</script></head><body class="preload" data-toggler-receiver="navigtion-sidebar"><div class="nav-sidebar" data-toggler-receiver="navigtion-sidebar"><div class="nav-sidebar__inner"><div><div class="l--f l--f-a-c"><div class="nav-sidebar__pp"><picture class=""><source srcset="../../images/3e4bcc2f-1341-4316-9e66-9f5add73cdcf-300.avif" type="image/avif"><source srcset="../../images/fa386c55-d80f-46c5-ac20-a38300e17915-300.webp" type="image/webp"><img alt="" loading="lazy" src="../../images/ca663d10-f3f0-4cdb-b4ea-10d45ec31339-300.jpeg"></picture></div><div class="l--f l--f-d-c"><author class="t--b t--medium">William Yallop</author><span>Web Developer</span></div></div><nav class="l--bm-t-l nav-sidebar__nav"><ul><li><a href="/">Projects</a></li><li><a href="/blogs">Blogs</a></li></ul></nav></div><div class="nav-sidebar__footer-link"><a href="https://github.com/WillYallop" rel="noreferrer" target="_blank" aria-label="My Github"><svg viewBox="0 0 496 512" xmlns="http://www.w3.org/2000/svg"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252a250.7 250.7 0 0 0 169.5 239.2c12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9a94.5 94.5 0 0 1 2.6-67.9c20.9-6.5 69 27 69 27a235 235 0 0 1 125.6 0s48.1-33.6 69-27a94.4 94.4 0 0 1 2.6 67.9c16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a><a href="https://www.linkedin.com/in/william-yallop-633429184/" rel="noreferrer" target="_blank" aria-label="My LinkedIn"><svg viewBox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M100.3 448H7.4V148.9h92.9zM53.8 108.1A54.2 54.2 0 0 1 0 53.8a53.8 53.8 0 0 1 107.6 0 54.2 54.2 0 0 1-53.8 54.3zM447.9 448h-92.7V302.4c0-34.7-.7-79.2-48.3-79.2-48.3 0-55.7 37.7-55.7 76.7V448h-92.7V148.9h89v40.8h1.3c12.4-23.5 42.7-48.3 88-48.3 94 0 111.2 61.9 111.2 142.3V448z"/></svg></a></div></div></div><button aria-label="Toggle navigation bar" class="nav-sidebar__toggle" data-toggler="navigtion-sidebar"><span class="sr-only">Toggle navigation bar</span> <svg viewBox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M0 96a32 32 0 0 1 32-32h384a32 32 0 1 1 0 64H32A32 32 0 0 1 0 96zm0 160a32 32 0 0 1 32-32h384a32 32 0 1 1 0 64H32a32 32 0 0 1-32-32zm448 160a32 32 0 0 1-32 32H32a32 32 0 1 1 0-64h384a32 32 0 0 1 32 32z"/></svg></button><main class="layout-main" data-toggler-receiver="navigtion-sidebar"><div class="layout-main__inner"><div class="l--f l--f-a-c project-hero-root__back"><a href="/" class="l--f l--f-a-c"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg> <span>Back to Projects</span></a></div><div class="l--f l--f-j-fe l--sp-h l--sp-th project-hero-root__top-bar"><a href="https://www.npmjs.com/package/@functionalities/formhandler" rel="noreferrer" target="_blank" class="btn-style btn-style__icon btn-style__icon--npm"><svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg"><path d="M288 288h-32v-64h32v64zm288-128v192H288v32H160v-32H0V160h576zm-416 32H32v128h64v-96h32v96h32V192zm160 0H192v160h64v-32h64V192zm224 0H352v128h64v-96h32v96h32v-96h32v96h32V192z"/></svg> </a><a href="https://github.com/WillYallop/functionalities/tree/main/packages/formhandler" rel="noreferrer" target="_blank" class="btn-style btn-style__icon btn-style__icon--github"><svg viewBox="0 0 496 512" xmlns="http://www.w3.org/2000/svg"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></a></div><section class="project-hero-root"><div class="l--sp-h l__wrapper l__wrapper--sw-m"><div class="l__wrapper l--sp-bh l--sp-th l__wrapper--bw-l project-hero-root__textarea"><h1>@functionalities/formhandler</h1><p>Form handler is a wrapper for sending and handling form errors and successes. It uses the browser's built-in input validation to check the form submitting.</p></div><div class="l--f l--f-j-c l--sp-b project-hero-root__technologies"><ul class="l--f l--f-j-c l--f-w-w"><li>Typescript</li></ul></div><div class="project-hero-root__preview"><picture class=""><source srcset="../../images/7efcd334-cd9d-4696-b8a0-64cf7deb0cfe-1200.avif" type="image/avif"><source srcset="../../images/5e61f388-3483-481d-9b06-9197c45318d1-1200.webp" type="image/webp"><img alt="" loading="" src="../../images/b3285b3d-51a6-48d0-83d7-12bc6673c5ce-1200.jpeg"></picture></div></div></section><section class="l--sp-h l__wrapper l__wrapper--sw-m l--sp-b l--sp-t"><div class="t__textarea"><p>Form handler is a wrapper for sending and handling form errors and successes. It uses the browser's built-in input validation to check the form before using your custom submit function to send off the form. We don't inject error messages or markup so as to not limit the style and design of your website. All failed inputs will be passed down to the onError callback function that you set when initialising the class.</p><p>It also has support for external validation if you do not wish to use the browsers.</p><h2>Install</h2><pre><code>npm install @functionalities/formhandler --save
</code></pre><h2>Example</h2><p>Below is a simple example of how you could use @formhandler. The only required value is the submitForm callback, but if you wished to add the input error messages onto the form, you would need to add that into the onError callback.</p><pre><code class="language-typescript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">FormHandler</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@functionalities/formhandler&quot;</span>;

<span class="hljs-keyword">new</span> <span class="hljs-title class_">FormHandler</span>(<span class="hljs-string">&quot;#form&quot;</span>, {
  <span class="hljs-attr">onError</span>: <span class="hljs-function">(<span class="hljs-params">errors</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;errors&quot;</span>, errors);
  },
  <span class="hljs-attr">submitForm</span>: <span class="hljs-keyword">async</span> (form) =&gt; {
    <span class="hljs-comment">// on success</span>
    <span class="hljs-keyword">const</span> action = form.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">&quot;action&quot;</span>);
    <span class="hljs-keyword">const</span> method = form.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">&quot;method&quot;</span>);
    <span class="hljs-keyword">if</span> (action &amp;&amp; method) {
      <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(action, {
        method,
        <span class="hljs-attr">body</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">FormData</span>(form),
      });
      <span class="hljs-keyword">if</span> (res.<span class="hljs-property">ok</span>) {
        <span class="hljs-keyword">return</span> {
          <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span>,
          <span class="hljs-attr">message</span>: <span class="hljs-string">&quot;Form submission successful&quot;</span>,
        };
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> {
          <span class="hljs-attr">success</span>: <span class="hljs-literal">false</span>,
          <span class="hljs-attr">message</span>: <span class="hljs-string">&quot;Form submission failed&quot;</span>,
        };
      }
    }
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">success</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">message</span>: <span class="hljs-string">&quot;The form must have an action and method attribute&quot;</span>,
    };
  },
});
</code></pre><blockquote><p>Note this example fetches the action and method attribute from the form. It's up to you, but this setup means the form would still work if a user visited your site without JS enabled!</p></blockquote><pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">form</span>
    <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;form&quot;</span>
    <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;http://localhost:4646/forms/submit&quot;</span>
    <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;post&quot;</span>
&gt;</span>
    <span class="hljs-comment">&lt;!-- first name --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span>
        <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;First Name&quot;</span>
        <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;firstName&quot;</span>
        <span class="hljs-attr">minlength</span>=<span class="hljs-string">&quot;5&quot;</span>
        <span class="hljs-attr">required</span>
    /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">data-input-relation</span>=<span class="hljs-string">&quot;firstName&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- email --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;email&quot;</span>
        <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;Email Address&quot;</span>
        <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;email&quot;</span>
        <span class="hljs-attr">required</span>
    /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">data-input-relation</span>=<span class="hljs-string">&quot;email&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- telephone --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;tel&quot;</span>
        <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;Telephone&quot;</span>
        <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;telephone&quot;</span>
        <span class="hljs-attr">required</span>
    /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">data-input-relation</span>=<span class="hljs-string">&quot;telephone&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- form status --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;form-status&quot;</span> <span class="hljs-attr">data-form-status</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">data-form-message</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- submit --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">data-form-submit</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;Submit&quot;</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
</code></pre><blockquote><p>Use HTML validation attributes on inputs to set your constraints</p></blockquote><h2>Config</h2><pre><code class="language-typescript"><span class="hljs-keyword">new</span> <span class="hljs-title class_">FormHandler</span>(<span class="hljs-string">&quot;#form&quot;</span>, {
    <span class="hljs-attr">validateOnChange</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">externalValidation</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">errorClass</span>: <span class="hljs-string">&quot;error&quot;</span>,
    <span class="hljs-attr">customValidation</span>: [],
    <span class="hljs-attr">reset</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">showMessageDuration</span>: <span class="hljs-number">3000</span>,
    <span class="hljs-attr">onError</span>: <span class="hljs-function">(<span class="hljs-params">errors</span>) =&gt;</span> {},
    <span class="hljs-attr">submitForm</span>: <span class="hljs-keyword">async</span> (form) =&gt; {
        <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">success</span>: <span class="hljs-literal">false</span>,
            <span class="hljs-attr">message</span>: <span class="hljs-string">&quot;The form must have an action and method attribute&quot;</span>,
        };
    },
});
</code></pre><h3>validateOnChange</h3><p>If set to true, on the form change event (fires when exiting an input) this will run the internal validate method against the input you updated. This validation method uses the browser's built-in form/input validation to check if the input's value you entered fits within the constraints you have set on the input through attributes such as required, minlength etc.</p><blockquote><p>If you have externalValidation set to true, this value will be ignored.</p></blockquote><h3>errorClass</h3><p>This is the class that is applied to all failing inputs and elements with an attribute of <code>data-input-relation</code> that has the value of the input's name.</p><h3>customValidation</h3><p>This allows you to define custom validation beyond what the browser has built-in. Here is an example:</p><pre><code class="language-typescript"><span class="hljs-keyword">new</span> <span class="hljs-title class_">FormHandler</span>(<span class="hljs-string">&quot;#form&quot;</span>, {
    <span class="hljs-attr">customValidation</span>: [
        {
            <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;firstName&#x27;</span>, <span class="hljs-comment">// this is your inputs name</span>
            <span class="hljs-attr">validator</span>: <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> {
                <span class="hljs-keyword">if</span>(value === <span class="hljs-string">&#x27;John&#x27;</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&#x27;</span>; <span class="hljs-comment">// &#x27;&#x27; represents no error</span>
                <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Validation failed. First name is not equal to John.&#x27;</span> <span class="hljs-comment">// this is your error</span>
            }
        }
    ],
    <span class="hljs-attr">submitForm</span>: <span class="hljs-keyword">async</span> (form) =&gt; {
        <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">message</span>: <span class="hljs-string">&quot;Pass&quot;</span>,
        };
    },
});
</code></pre><h3>reset</h3><p>If set to true, on a successful form submission, all form inputs will be reset. This also handles whether or not we hide the success message after the showMessageDuration has run its course.</p><h3>showMessageDuration</h3><p>This defines how long a success message should be visible before being removed. This has to have the reset value set to true for it to hide the success message.</p><h3>onError</h3><p>This is a callback function that receives an array of objects containing all of the failed inputs. It is on you to implement a solution to display this on the form if that's what you want. Here is an example of the data it receives.</p><pre><code class="language-typescript"><span class="hljs-keyword">new</span> <span class="hljs-title class_">FormHandler</span>(<span class="hljs-string">&quot;#form&quot;</span>, {
    <span class="hljs-attr">onError</span>: <span class="hljs-function">(<span class="hljs-params">errors</span>) =&gt;</span> {
        <span class="hljs-comment">/*
            errors: [
                {
                    name: &#x27;firstName&#x27;,
                    message: &#x27;Please fill in this field.&#x27;,
                    valid: false,
                },
                {
                    name: &#x27;email&#x27;,
                    message: &#x27;Please fill in this field.&#x27;.
                    valid: false,
                }
            ]
        */</span>
    },
});
</code></pre><blockquote><p>The messages received are the default browser messages. You can either use these to explain the reason an input failed, or you could create your own.</p></blockquote><h3>submitForm</h3><p>This callback is responsible for sending off the form data. This is called when a user clicks a submit input/button and it returns a form element as its only parameter. You must return an object in this to tell the package if it was successful, and what message should it display.</p><pre><code class="language-typescript"><span class="hljs-keyword">new</span> <span class="hljs-title class_">FormHandler</span>(<span class="hljs-string">&quot;#form&quot;</span>, {
  <span class="hljs-attr">onError</span>: <span class="hljs-function">(<span class="hljs-params">errors</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;errors&quot;</span>, errors);
  },
  <span class="hljs-attr">submitForm</span>: <span class="hljs-keyword">async</span> (form) =&gt; {
    <span class="hljs-comment">// on success</span>
    <span class="hljs-keyword">const</span> action = form.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">&quot;action&quot;</span>);
    <span class="hljs-keyword">const</span> method = form.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">&quot;method&quot;</span>);
    <span class="hljs-keyword">if</span> (action &amp;&amp; method) {
      <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(action, {
        method,
        <span class="hljs-attr">body</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">FormData</span>(form),
      });
      <span class="hljs-keyword">if</span> (res.<span class="hljs-property">ok</span>) {
        <span class="hljs-keyword">return</span> {
          <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span>,
          <span class="hljs-attr">message</span>: <span class="hljs-string">&quot;Form submission successful&quot;</span>,
        };
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> {
          <span class="hljs-attr">success</span>: <span class="hljs-literal">false</span>,
          <span class="hljs-attr">message</span>: <span class="hljs-string">&quot;Form submission failed&quot;</span>,
        };
      }
    }
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">success</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">message</span>: <span class="hljs-string">&quot;The form must have an action and method attribute&quot;</span>,
    };
  },
});
</code></pre><p>If you have the externalValidation value set to true, you need to handle return errors in this as well. An example of this response looks like this:</p><pre><code class="language-typescript"><span class="hljs-keyword">const</span> externalValidationExample = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FormHandler</span>(<span class="hljs-string">&quot;#form&quot;</span>, {
    <span class="hljs-attr">externalValidation</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">submitForm</span>: <span class="hljs-keyword">async</span> (form) =&gt; {
        <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(action, {
            method,
            <span class="hljs-attr">body</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">FormData</span>(form),
        });
        <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> res.<span class="hljs-title function_">json</span>();
        <span class="hljs-keyword">if</span> (data.<span class="hljs-property">errors</span>) {
            <span class="hljs-keyword">return</span> { <span class="hljs-attr">success</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">errors</span>: data.<span class="hljs-property">errors</span> }; <span class="hljs-comment">// this data.errors value is accessible in the onErrors callback - see bellow</span>
        } 
        <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> {
                <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span>,
                <span class="hljs-attr">message</span>: <span class="hljs-string">&quot;Form submitted successfully&quot;</span>,
            };
        }
    },
    <span class="hljs-attr">onError</span>: <span class="hljs-function">(<span class="hljs-params">errors</span>) =&gt;</span> {
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> key <span class="hljs-keyword">in</span> errors) {
            externalValidationExample.<span class="hljs-title function_">setInputError</span>(key); <span class="hljs-comment">// the set input error method requires an input name.</span>
        }
    },
});
</code></pre><h3>externalValidation</h3><p>If you want to use your own validation instead of the browser's built-in system for it. Set this value to true. In doing so this ships some more responsibility to you when it comes to the submitForm and onError callbacks.</p><p>For example, with the submitForm callback, you now can now return an extra errors value, this will be passed to the onError callback where you can handle it there. In the onError callback, you will need to use the public setInputError method that the FormHandler class exposes. Here is an example:</p><pre><code class="language-typescript"><span class="hljs-keyword">const</span> externalValidationExample = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FormHandler</span>(<span class="hljs-string">&quot;#form&quot;</span>, {
    <span class="hljs-attr">externalValidation</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">submitForm</span>: <span class="hljs-keyword">async</span> (form) =&gt; {
        <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(action, {
            method,
            <span class="hljs-attr">body</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">FormData</span>(form),
        });
        <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> res.<span class="hljs-title function_">json</span>();
        <span class="hljs-keyword">if</span> (data.<span class="hljs-property">errors</span>) {
            <span class="hljs-keyword">return</span> { <span class="hljs-attr">success</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">errors</span>: data.<span class="hljs-property">errors</span> }; <span class="hljs-comment">// this data.errors value is accessible in the onErrors callback - see bellow</span>
        } 
        <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> {
                <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span>,
                <span class="hljs-attr">message</span>: <span class="hljs-string">&quot;Form submitted successfully&quot;</span>,
            };
        }
    },
    <span class="hljs-attr">onError</span>: <span class="hljs-function">(<span class="hljs-params">errors</span>) =&gt;</span> {
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> key <span class="hljs-keyword">in</span> errors) {
            externalValidationExample.<span class="hljs-title function_">setInputError</span>(key); <span class="hljs-comment">// the set input error method requires an input name.</span>
        }
    },
});
</code></pre><h2>Attributes</h2><h3>data-input-relation</h3><p>Adding this attribute to an element within the form will link it to a specific input. All it needs to the value to be set to the inputs name. Any element that has this, will also get the errorClass applied to it if its corresponding input fails validation.</p><pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">data-input-relation</span>=<span class="hljs-string">&quot;firstName&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span>
        <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;First Name&quot;</span>
        <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;firstName&quot;</span>
        <span class="hljs-attr">minlength</span>=<span class="hljs-string">&quot;5&quot;</span>
        <span class="hljs-attr">required</span>
    /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">data-input-relation</span>=<span class="hljs-string">&quot;firstName&quot;</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- Use the onError callback to add errors here, and use the error class on this element to show/hide it --&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre><blockquote><p>You can have as many as you like all with the same name.</p></blockquote><h3>data-form-submit</h3><p>This should be placed on the form submit input/button. It is used to add and remove the disabled attribute so you cannot trigger the form again if it is still processing.</p><pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">data-form-submit</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;Submit&quot;</span> /&gt;</span>
</code></pre><h3>data-form-status</h3><p>Any element with this attribute on it will have its data-form-status value updated depending on the state of the form. It can have the following values:</p><ul><li>data-form-submit=&quot;&quot;</li><li>data-form-submit=&quot;loading&quot;</li><li>data-form-submit=&quot;error&quot;</li><li>data-form-submit=&quot;success&quot;</li></ul><p>You can use this in your CSS to show and hide certain content. For instance, you could use it to display a loading state or hide the data-form-message.</p><pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;form-status&quot;</span> <span class="hljs-attr">data-form-status</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;form-status__message&quot;</span> <span class="hljs-attr">data-form-message</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;form-status__loading&quot;</span>&gt;</span>Loading<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre><h3>data-form-message</h3><p>Any element with this attribute will have its innerHTML set to the message response value of the submitForm callback.</p><h2>Notes</h2><ul><li>To find examples of this, check out the repo that the package is a part of and find the <code>/apps/playground-fr</code> directory!</li><li>This shouldn't be used in any JS framework that has a virtual DOM!</li></ul></div></section></div></main><span class="footer-root__spacer"></span><footer class="l--f l--f-a-c footer-root l--bm-t-l l--f-j-c"><p>This site was built using&nbsp;<a href="https://github.com/WillYallop/static-site-generator" rel="noreferrer" target="_blank">@SSG</a>&nbsp;&&nbsp;<a href="https://github.com/WillYallop/functionalities" rel="noreferrer" target="_blank"> @functionalities</a>&nbsp;only!</p></footer>></body><script async src="../../js/index.js"></script></html>